<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®ˆæœ›å…ˆé”‹ å½©è‰²æ–‡å­—ç”Ÿæˆå™¨ Pro</title>
    <style>
        :root {
            --bg-color: #0d0221;
            --primary-color: #00f6ff;
            --secondary-color: #ff00ff;
            --tertiary-color: #52ff00;
            --text-color: #f0f0f0;
            --border-glow: 0 0 3px var(--primary-color), 0 0 8px var(--primary-color), 0 0 15px var(--primary-color);
            --border-glow-secondary: 0 0 3px var(--secondary-color), 0 0 8px var(--secondary-color), 0 0 15px var(--secondary-color);
            --font-family: 'Segoe UI', 'Microsoft YaHei', 'PingFang SC', sans-serif;
            --font-mono: 'Consolas', 'Courier New', monospace;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: var(--font-family);
            margin: 0;
            padding: 2em;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .container {
            width: 100%;
            max-width: 700px;
            background: rgba(13, 2, 33, 0.8);
            border: 1px solid var(--primary-color);
            box-shadow: var(--border-glow);
            padding: 2em;
            border-radius: 10px;
            backdrop-filter: blur(5px);
        }

        h1 {
            text-align: center;
            color: var(--primary-color);
            text-shadow: 0 0 5px var(--primary-color), 0 0 10px var(--primary-color);
            margin-bottom: 1em;
            letter-spacing: 2px;
        }

        /* Mode Tabs */
        .mode-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 1px solid #333;
        }

        .mode-tab {
            padding: 10px 20px;
            cursor: pointer;
            border: 1px solid transparent;
            border-bottom: none;
            border-radius: 5px 5px 0 0;
            font-size: 1.1em;
            transition: all 0.3s;
        }

        .mode-tab:hover {
            background: rgba(0, 246, 255, 0.1);
        }

        .mode-tab.active {
            border-color: var(--primary-color);
            background-color: #1a0c33;
            color: var(--primary-color);
            font-weight: bold;
        }

        .mode-panel {
            display: none;
        }

        .mode-panel.active {
            display: block;
        }

        .segment-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 20px;
        }

        .segment-row {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            border-radius: 8px;
            border: 1px solid #333;
            transition: all 0.3s ease;
        }

        .segment-row.active-row {
            border-color: var(--secondary-color);
            box-shadow: var(--border-glow-secondary);
        }

        .segment-row input[type="checkbox"] {
            appearance: none;
            width: 20px;
            height: 20px;
            border: 2px solid var(--primary-color);
            border-radius: 4px;
            cursor: pointer;
            position: relative;
            transition: all 0.2s ease;
            flex-shrink: 0;
        }

        .segment-row input[type="checkbox"]:checked {
            background-color: var(--primary-color);
            box-shadow: var(--border-glow);
        }

        .segment-row input[type="checkbox"]:checked::after {
            content: 'âœ”';
            color: var(--bg-color);
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 14px;
            font-weight: bold;
        }

        .color-swatch {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid #555;
            transition: transform 0.2s;
            flex-shrink: 0;
        }

        .color-swatch:hover {
            transform: scale(1.1);
        }

        .text-input {
            flex-grow: 1;
            background-color: #1a0c33;
            border: 1px solid #444;
            padding: 8px 12px;
            border-radius: 5px;
            font-size: 1em;
            transition: all 0.3s ease;
            min-height: 22px;
            line-height: 22px;
            outline: none;
        }

        .text-input:focus {
            border-color: var(--secondary-color);
            box-shadow: 0 0 5px var(--secondary-color);
        }

        .text-input:empty:before {
            content: attr(placeholder);
            color: #666;
            pointer-events: none;
        }

        .emoji-code-inline {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-color);
            padding: 2px 4px;
            border-radius: 4px;
            font-family: var(--font-mono);
            font-size: 0.9em;
            display: inline-block;
            margin: 0 2px;
            user-select: none;
        }

        .segment-actions button {
            background: transparent;
            border: 1px solid var(--tertiary-color);
            color: var(--tertiary-color);
            width: 30px;
            height: 30px;
            border-radius: 50%;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }

        .segment-actions button.remove-btn {
            border-color: var(--secondary-color);
            color: var(--secondary-color);
        }

        .segment-actions button:hover {
            background-color: var(--tertiary-color);
            color: var(--bg-color);
            box-shadow: 0 0 5px var(--tertiary-color);
        }

        .segment-actions button.remove-btn:hover {
            background-color: var(--secondary-color);
            box-shadow: 0 0 5px var(--secondary-color);
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 25px;
            margin-bottom: 25px;
        }

        .main-btn {
            background: transparent;
            border: 2px solid;
            padding: 10px 25px;
            font-size: 1.1em;
            font-weight: bold;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            letter-spacing: 1px;
        }

        #generate-btn {
            color: var(--primary-color);
            border-color: var(--primary-color);
        }

        #generate-btn:hover {
            background-color: var(--primary-color);
            color: var(--bg-color);
            box-shadow: var(--border-glow);
        }

        #emoji-btn {
            color: var(--tertiary-color);
            border-color: var(--tertiary-color);
        }

        #emoji-btn:hover {
            background-color: var(--tertiary-color);
            color: var(--bg-color);
            box-shadow: 0 0 5px var(--tertiary-color);
        }

        .output-container {
            margin-top: 20px;
        }

        .output-container label {
            color: var(--primary-color);
            font-weight: bold;
        }

        #output-text {
            background-color: #111;
            border: 1px dashed #555;
            padding: 15px;
            border-radius: 5px;
            word-wrap: break-word;
            min-height: 50px;
            margin-top: 10px;
            line-height: 22px;
        }

        #copy-status {
            color: var(--tertiary-color);
            font-weight: bold;
            text-align: center;
            display: block;
            margin-top: 10px;
            height: 20px;
            transition: opacity 0.5s;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background-color: var(--bg-color);
            margin: 10% auto;
            padding: 25px;
            border: 1px solid var(--secondary-color);
            box-shadow: var(--border-glow-secondary);
            border-radius: 10px;
            width: 80%;
            max-width: 600px;
            position: relative;
        }

        .modal-close {
            color: #aaa;
            position: absolute;
            top: 10px;
            right: 20px;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .modal-close:hover,
        .modal-close:focus {
            color: var(--text-color);
        }

        #color-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .preset-color {
            cursor: pointer;
            text-align: center;
        }

        .preset-color-box {
            width: 50px;
            height: 50px;
            border-radius: 8px;
            margin: 0 auto 5px;
            border: 2px solid transparent;
            transition: all 0.2s;
        }

        .preset-color:hover .preset-color-box {
            border-color: var(--primary-color);
            transform: scale(1.1);
        }

        .custom-color-section {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #444;
        }

        .custom-color-section input[type="color"] {
            width: 50px;
            height: 50px;
            border: none;
            background: none;
            padding: 0;
            cursor: pointer;
        }

        .emoji-modal-content h2 {
            color: var(--tertiary-color);
            text-align: center;
        }

        .emoji-tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            border-bottom: 1px solid var(--primary-color);
            margin-bottom: 20px;
        }

        .emoji-tab {
            padding: 10px 15px;
            cursor: pointer;
            border: 1px solid transparent;
            border-bottom: none;
            border-radius: 5px 5px 0 0;
            transition: all 0.3s;
        }

        .emoji-tab:hover {
            background: rgba(0, 246, 255, 0.1);
        }

        .emoji-tab.active {
            border-color: var(--primary-color);
            background-color: var(--bg-color);
            color: var(--primary-color);
            font-weight: bold;
        }

        .emoji-panel {
            display: none;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 10px;
            max-height: 40vh;
            overflow-y: auto;
            padding-right: 10px;
        }

        .emoji-panel.active {
            display: grid;
        }

        .emoji-item {
            background: #1a0c33;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
            text-align: center;
            font-size: 14px;
            transition: background-color 0.2s;
            border: 1px solid #333;
        }

        .emoji-item:hover {
            background-color: var(--secondary-color);
            color: var(--bg-color);
        }

        .emoji-item .emoji-code {
            font-family: var(--font-mono);
            font-size: 11px;
            opacity: 0.7;
            display: block;
            margin-top: 5px;
        }
    </style>
</head>

<body>

    <div class="container">
        <h1>å®ˆæœ›å…ˆé”‹ å½©è‰²æ–‡å­—ç”Ÿæˆå™¨ Pro</h1>
        <h2>â¤ï¸å°çº¢ä¹¦ID:1135655410â¤ï¸</h2>
        <h2>å…è´¹å‘å¸ƒï¼Œä»˜è´¹ = ä¸Šå½“</h2>
        <!--å¤ç”¨åˆ›æ„çš„è¯·å’Œæˆ‘è¯´ä¸€ä¸‹-->
        <div class="mode-tabs">
            <div class="mode-tab active" data-mode="custom">è‡ªå®šä¹‰æ¨¡å¼ ğŸ˜</div>
            <div class="mode-tab" data-mode="random">ç–¯ç‹‚éšæœºæ¨¡å¼ ğŸ¤¡</div>
        </div>

        <div id="custom-mode-panel" class="mode-panel active">
            <div id="segment-list" class="segment-list"></div>
        </div>

        <div id="random-mode-panel" class="mode-panel">
            <div id="random-input-container" class="segment-row">
                <div id="random-text-input" class="text-input" contenteditable="true" placeholder="åœ¨æ­¤è¾“å…¥æ–‡å­—ï¼Œç„¶åç‚¹å‡»ç”Ÿæˆ..."
                    style="color: var(--text-color);"></div>
            </div>
        </div>

        <div class="controls">
            <button id="generate-btn" class="main-btn">ç”Ÿæˆå¹¶å¤åˆ¶</button>
            <button id="emoji-btn" class="main-btn">æ’å…¥è¡¨æƒ…</button>
        </div>
        <div class="output-container">
            <label for="output-text">ç”Ÿæˆç»“æœ:</label>
            <div id="output-text"></div>
        </div>
        <div id="copy-status"></div>
    </div>

    <!-- Modals -->
    <div id="color-modal" class="modal">
        <div class="modal-content"><span class="modal-close" id="color-modal-close">&times;</span>
            <h2>é€‰æ‹©é¢œè‰²</h2>
            <div id="color-grid"></div>
            <div class="custom-color-section"><label>è‡ªå®šä¹‰é¢œè‰²:</label><input type="color" id="custom-color-picker"
                    value="#ff1493"><span id="custom-color-code">#ff1493</span></div>
        </div>
    </div>
    <div id="emoji-modal" class="modal">
        <div class="modal-content emoji-modal-content"><span class="modal-close" id="emoji-modal-close">&times;</span>
            <h2>é€‰æ‹©è¡¨æƒ…æˆ–å›¾æ ‡</h2>
            <div class="emoji-tabs" id="emoji-tabs"></div>
            <div id="emoji-panels"></div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            const presetColors = {
                "æ­£çº¢": "FF0000",      // çº¯çº¢ï¼Œç»å…¸çº¢è‰²èµ·ç‚¹
                "æ¨±æ¡ƒçº¢": "DC143C",   // æ¸©æš–çš„æ·±çº¢
                "äº®ç²‰": "FF1493",     // åŸæœ‰é¢œè‰²ï¼Œç²‰çº¢
                "æ·¡ç²‰": "FC9ACD",     // åŸæœ‰é¢œè‰²ï¼ŒæŸ”å’Œç²‰
                "ç«ç‘°çº¢": "C71585",   // åç´«çš„æ·±ç²‰
                "ç´«çº¢": "800080",     // ç»å…¸ç´«çº¢
                "ç´«è‰²": "A231B3",     // åŸæœ‰é¢œè‰²ï¼Œé²œè‰³ç´«
                "æ·±ç´«": "4B0082",     // æµ“éƒçš„é›ç´«
                "é›è“": "483D8B",     // åå†·çš„æ·±è“ç´«
                "æ·±è“": "2313BB",     // åŸæœ‰é¢œè‰²ï¼Œé²œè‰³æ·±è“
                "å®è“": "4169E1",     // æ˜äº®çš‡å®¶è“
                "å¤©è“": "87CEEB",     // æ¸…æ–°çš„å¤©ç©ºè“
                "é’è‰²": "53D7B6",     // åŸæœ‰é¢œè‰²ï¼Œé’ç»¿
                "ç¢§è“": "00CED1",     // æ˜äº®çš„é’è“
                "æµ·è“": "20B2AA",     // æµ·æ´‹èˆ¬çš„è“ç»¿
                "å­”é›€ç»¿": "008B8B",   // æ·±é’ç»¿
                "äº®ç»¿": "53D760",     // åŸæœ‰é¢œè‰²ï¼Œé²œè‰³ç»¿
                "è‰ç»¿": "B0DF22",     // åŸæœ‰é¢œè‰²ï¼Œè‰æœ¬ç»¿
                "æ©„æ¦„ç»¿": "6B8E23",   // è‡ªç„¶çš„æ©„æ¦„è‰²
                "æ£®æ—ç»¿": "228B22",   // æ·±æ²‰çš„æ£®æ—ç»¿
                "é»„ç»¿": "9ACD32",     // æ˜äº®çš„é»„ç»¿
                "æŸ æª¬é»„": "FFFACD",   // æŸ”å’Œçš„æµ…é»„
                "é»„è‰²": "F4E607",     // åŸæœ‰é¢œè‰²ï¼Œé²œè‰³é»„
                "é‡‘é»„": "FFD700",     // æ¸©æš–çš„é‡‘è‰²
                "æ©™é»„": "FFA500",     // ç»å…¸æ©™é»„
                "æ©™è‰²": "F47C07",     // åŸæœ‰é¢œè‰²ï¼Œé²œè‰³æ©™
                "çŠç‘šæ©™": "FF7F50",   // æŸ”å’Œçš„çŠç‘šè‰²
                "ç•ªèŒ„çº¢": "FF6347",   // åæ©™çš„æš–çº¢
                "ç™½è‰²": "FFFFFF",     // åŸæœ‰é¢œè‰²ï¼Œçº¯ç™½
                "ç°è‰²": "808080",     // åŸæœ‰é¢œè‰²ï¼Œä¸­ç°
                "é»‘è‰²": "000000",    //çº¯é»‘
                "light_salmon": "FFA07A",
                "salmon": "FA8072",
                "dark_salmon": "E9967A",
                "light_coral": "F08080",
                "indian_red": "CD5C5C",
                "crimson": "DC143C",
                "firebrick": "B22222",
                // çº¢è‰²ç³»
                "pink": "FFC0CB",
                "light_pink": "FFB6C1",
                "hot_pink": "FF69B4",
                "deep_pink": "FF1493",
                "medium_violet_red": "C71585",
                // ç²‰è‰²/ç´«çº¢ç³»
                "light_cyan": "E0FFFF",
                "pale_turquoise": "AFEEEE",
                "aquamarine": "7FFFD4",
                "turquoise": "40E0D0",
                "cyan": "00FFFF",
                "dark_cyan": "008B8B",
                // é’/è“ç³»
                "light_blue": "ADD8E6",
                "sky_blue": "87CEEB",
                "steel_blue": "4682B4",
                "royal_blue": "4169E1",
                "medium_slate_blue": "7B68EE",
                "slate_blue": "6A5ACD",
                // è“ç´«ç³»
                "lavender": "E6E6FA",
                "thistle": "D8BFD8",
                "plum": "DDA0DD",
                "violet": "EE82EE",
                "magenta": "FF00FF",
                "purple": "800080",
                "rebeccapurple": "663399",
                // ç´«è‰²ç³»
                "light_green": "90EE90",
                "lime_green": "32CD32",
                "forest_green": "228B22",
                "olive_drab": "6B8E23",
                "dark_olive_green": "556B2F",
                "yellow_green": "9ACD32",
                // ç»¿ç³»
                "gold": "FFD700",
                "khaki": "F0E68C",
                "lemon_chiffon": "FFFACD",
                "pale_goldenrod": "EEE8AA",
                "light_goldenrod_yellow": "FAFAD2",
                // é»„/æ©™ç³»
                "moccasin": "FFE4B5",
                "peach_puff": "FFDAB9",
                "coral": "FF7F50",
                "tomato": "FF6347",
                "orange_red": "FF4500",
                "dark_orange": "FF8C00",
                "orange": "FFA500",
                // æ©™çº¢ç³»
                "beige": "F5F5DC",
                "wheat": "F5DEB3",
                "burlywood": "DEB887",
                "tan": "D2B48C",
                "rosy_brown": "BC8F8F",
                "sienna": "A0522D",
                "brown": "A52A2A",
                // æ£•ç³»
                "gainsboro": "DCDCDC",
                "light_gray": "D3D3D3",
                "silver": "C0C0C0",
                "dark_gray": "A9A9A9",
                "dim_gray": "696969",
                "gray": "808080",
                "dark_slate_gray": "2F4F4F",
                "black": "000000",
                // ç°é»‘
                "white_smoke": "F5F5F5",
                "alice_blue": "F0F8FF",
                "ghost_white": "F8F8FF",
                "floral_white": "FFFAF0",
                "mint_cream": "F5FFFA",
                "azure": "F0FFFF",
                // ç™½ç³»æ·¡è‰²

            };
            const presetColorValues = Object.values(presetColors);

            // ===== DATA UPDATE =====
            const emojis = {
                "å¸¸ç”¨è¡¨æƒ…": [{ name: "çˆ±å¿ƒ â¤ï¸", code: "<tx0C00000000017112>" }, { name: "ç‚¹èµ ğŸ‘", code: "<tx0C00000000005A0D>" }, { name: "æ‹›æ‰‹ ğŸ‘‹", code: "<tx0C00000000005A0B>" }, { name: "éš¾è¿‡ ğŸ˜”", code: "<tx0C0000000002A9FE>" }, { name: "è­¦å‘Š âš ï¸", code: "<tx0C00000000005A0C>" }, { name: "å‰ âŒ", code: "<tx0C0000000002A9F9>" }],
                "è‹±é›„å›¾æ ‡": [{ name: "å¤©ä½¿", code: "<tx0C00000000038C39>" }, { name: "å®‰å¨œ", code: "<tx0C00000000038C3C>" }, { name: "Dva", code: "<tx0C00000000038C19>" }, { name: "é“æ‹³", code: "<tx0C00000000038C1A>" }, { name: "å¥³ç‹", code: "<tx0C00000000038C1B>" }, { name: "å¥¥ä¸½è", code: "<tx0C00000000038C1C>" }, { name: "è€ç›", code: "<tx0C00000000038C1D>" }, { name: "å¤§é”¤", code: "<tx0C00000000038C1E>" }, { name: "è·¯éœ¸", code: "<tx0C00000000038C1F>" }, { name: "çŒ©çŒ©", code: "<tx0C00000000038C25>" }, { name: "ä»“é¼ ", code: "<tx0C00000000038C26>" }, { name: "è¥¿æ ¼ç›", code: "<tx0C00000000038C27>" }, { name: "æŸ¥è‰å¨…", code: "<tx0C00000000038C28>" }, { name: "è‰¾ä»€", code: "<tx0C00000000038C29>" }, { name: "å ¡å’", code: "<tx0C00000000038C2A>" }, { name: "éº¦å…‹é›·", code: "<tx0C00000000038C2B>" }, { name: "å›å£°", code: "<tx0C0000000003849D>" }, { name: "æºæ°", code: "<tx0C00000000038C2C>" }, { name: "åŠè—", code: "<tx0C00000000038C2D>" }, { name: "ç‹‚é¼ ", code: "<tx0C00000000038C2E>" }, { name: "å°ç¾", code: "<tx0C00000000038C2F>" }, { name: "æ³•æ‹‰", code: "<tx0C00000000038C30>" }, { name: "æ­»ç¥", code: "<tx0C00000000038C31>" }, { name: "ç´¢æ°æ©", code: "<tx0C00000000038C33>" }, { name: "å£«å…µ76", code: "<tx0C00000000038C34>" }, { name: "é»‘å½±", code: "<tx0C00000000038C35>" }, { name: "é˜¿ä¸‰", code: "<tx0C00000000038C36>" }, { name: "æ‰˜æ¯”æ˜‚", code: "<tx0C00000000038C37>" }, { name: "é»‘ç™¾åˆ", code: "<tx0C00000000038C38>" }, { name: "è«ä¼Šæ‹‰", code: "<tx0C00000000038C3A>" }, { name: "å’Œå°š", code: "<tx0C00000000038C3B>" }, { name: "é—ªå…‰", code: "<tx0C00000000038C3D>" }, { name: "å·´è’‚", code: "<tx0C00000000038C3E>" }, { name: "å¸ƒä¸½å‰å¡”", code: "<tx0C00000000038C3F>" }, { name: "é›¾å­", code: "<tx0C00000000038C40>" }, { name: "å¢è¥¿å¥¥", code: "<tx0C00000000038C41>" }, { name: "å®ˆæœ›å…ˆé”‹è”èµ›", code: "<tx0C00000000038C81>" }, { name: "æœªçŸ¥è‹±é›„", code: "<tx0C00000000001297>" }],
                "æ‚é¡¹å›¾æ ‡": [{ name: "æ¶ˆç­(éª·é«…)", code: "<tx0C000000000015BB>" }, { name: "éº¦å…‹é£", code: "<tx0C00000000007114>" }, { name: "é‡‘ç‰Œ", code: "<tx0C0000000000797E>" }, { name: "é“¶ç‰Œ", code: "<tx0C0000000000797C>" }, { name: "é“œç‰Œ", code: "<tx0C0000000000797D>" }, { name: "æ¸¸æˆè´§å¸", code: "<tx0C00000000008E02>" }, { name: "å·¥åŠå›¾æ ‡", code: "<tx0C0000000001FEE9>" }, { name: "å‡†å¤‡å°±ç»ª", code: "<tx0C000000000039DB>" }, { name: "500å¼º(ç´«)", code: "<tx0C000000000190E0>" }, { name: "500å¼º(æ©™)", code: "<tx0C00000000009A2E>" }, { name: "500å¼º(ç™½)", code: "<tx0C0000000000A541>" }, { name: "ç‚¹èµ(ç»¿)", code: "<tx0C0000000001764D>" }, { name: "ä½“è‚²ç²¾ç¥(é’)", code: "<tx0C0000000001764F>" }, { name: "æŒ‡æŒ¥(ç´«)", code: "<tx0C0000000001764E>" }, { name: "ç«æŠ€ç‚¹", code: "<tx0C0000000000906E>" }, { name: "æ…ˆå–„(BCRF)", code: "<tx0C00000000017082>" }, { name: "å…¨æ˜æ˜Ÿ", code: "<tx0C00000000018F63>" }],
                "åœ°å›¾å›¾æ ‡": [{ name: "æ–°æ‰‹æ•™ç¨‹", code: "<tx0C00000000005D1C>" }, { name: "é˜¿åŠªæ¯”æ–¯", code: "<tx0C00000000005D1D>" }, { name: "ç›‘æµ‹ç«™ï¼šç›´å¸ƒç½—é™€", code: "<tx0C00000000005D1E>" }, { name: "å¥½è±å", code: "<tx0C00000000005D1F>" }, { name: "èŠ±æ‘", code: "<tx0C00000000005D20>" }, { name: "å›½ç‹å¤§é“", code: "<tx0C00000000005D21>" }, { name: "å¤šæ‹‰å¤š", code: "<tx0C00000000005D22>" }, { name: "æ²ƒæ–¯å¡å¨…å·¥ä¸šåŒº", code: "<tx0C00000000005D24>" }, { name: "æ¼“æ±Ÿå¡”", code: "<tx0C00000000005D28>" }, { name: "ä¼Šåˆ©å¥¥æ–¯", code: "<tx0C00000000005D29>" }, { name: "å°¼æ³Šå°”", code: "<tx0C00000000005D2A>" }, { name: "é¶åœº", code: "<tx0C00000000007417>" }, { name: "è‰¾å…´ç“¦å°”å¾·", code: "<tx0C0000000000A214>" }, { name: "ç»¿æ´²åŸ", code: "<tx0C0000000000BF72>" }, { name: "æ¸£å®¢é•‡", code: "<tx0C0000000000F302>" }, { name: "æš´é›ªä¸–ç•Œ", code: "<tx0C00000000012B71>" }, { name: "é‡Œé˜¿å°”æ‰˜", code: "<tx0C00000000013EC2>" }, { name: "é‡œå±±", code: "<tx0C00000000017629>" }, { name: "å·´é»", code: "<tx0C000000000191C5>" }, { name: "å“ˆç“¦é‚£", code: "<tx0C0000000001ED2B>" }],
                "æ“ä½œå›¾æ ‡": [{ name: "é¼ æ ‡å·¦é”®", code: "<tx0C0000000000447F>" }, { name: "é¼ æ ‡å³é”®", code: "<tx0C00000000004480>" }, { name: "é¼ æ ‡ä¸­é”®", code: "<tx0C00000000005DAD>" }, { name: "æ»šè½®ä¸Š", code: "<tx0C00000000005DA0>" }, { name: "æ»šè½®ä¸‹", code: "<tx0C00000000005DA1>" }, { name: "å·¦æ‘‡æ†", code: "<tx0C000000000044A7>" }, { name: "å³æ‘‡æ†", code: "<tx0C000000000044A8>" }, { name: "åå­—é”®ä¸Š", code: "<tx0C000000000044A6>" }, { name: "åå­—é”®ä¸‹", code: "<tx0C000000000044B3>" }, { name: "åå­—é”®å·¦", code: "<tx0C000000000044B4>" }, { name: "åå­—é”®å³", code: "<tx0C000000000044A5>" }]
            };

            const segmentList = document.getElementById('segment-list'), randomTextInput = document.getElementById('random-text-input'), generateBtn = document.getElementById('generate-btn'), emojiBtn = document.getElementById('emoji-btn'), outputText = document.getElementById('output-text'), copyStatus = document.getElementById('copy-status'), colorModal = document.getElementById('color-modal'), colorModalClose = document.getElementById('color-modal-close'), colorGrid = document.getElementById('color-grid'), customColorPicker = document.getElementById('custom-color-picker'), customColorCode = document.getElementById('custom-color-code'), emojiModal = document.getElementById('emoji-modal'), emojiModalClose = document.getElementById('emoji-modal-close'), emojiTabs = document.getElementById('emoji-tabs'), emojiPanels = document.getElementById('emoji-panels');

            let currentMode = 'custom', activeInput = null, activeColorSwatch = null, segmentCounter = 0, selectionRange = null;

            const createSegmentRow = (isFirst = false) => {
                segmentCounter++;
                const row = document.createElement('div');
                row.className = 'segment-row';
                row.id = `segment-row-${segmentCounter}`;
                const defaultColor = presetColorValues[0];
                row.innerHTML = `<input type="checkbox" class="segment-checkbox" ${isFirst ? 'checked' : ''}><div class="color-swatch" style="background-color: #${defaultColor};" data-color="${defaultColor}"></div><div class="text-input" contenteditable="true" style="color: #${defaultColor};" placeholder="è¾“å…¥æ–‡å­—..."></div><div class="segment-actions"><button class="add-btn">+</button>${!isFirst ? '<button class="remove-btn">-</button>' : ''}</div>`;
                segmentList.appendChild(row);
                updateRemoveButtons();
            };

            const updateRemoveButtons = () => {
                const rows = segmentList.querySelectorAll('.segment-row');
                rows.forEach(row => { let removeBtn = row.querySelector('.remove-btn'); if (rows.length > 1) { if (!removeBtn) { const actions = row.querySelector('.segment-actions'); removeBtn = document.createElement('button'); removeBtn.className = 'remove-btn'; removeBtn.textContent = '-'; actions.appendChild(removeBtn); } } else { if (removeBtn) removeBtn.remove(); } });
            };

            const showNotification = (message, isError = false) => {
                copyStatus.textContent = message;
                copyStatus.style.color = isError ? 'var(--secondary-color)' : 'var(--tertiary-color)';
                setTimeout(() => copyStatus.textContent = '', 2000);
            };

            const generateAndCopy = () => {
                let rawString = '', htmlString = '';

                if (currentMode === 'custom') {
                    segmentList.querySelectorAll('.segment-row').forEach(row => {
                        const checkbox = row.querySelector('.segment-checkbox'), inputDiv = row.querySelector('.text-input'), swatch = row.querySelector('.color-swatch');
                        let textContent = '';
                        inputDiv.childNodes.forEach(node => { textContent += node.nodeType === 3 ? node.textContent : (node.dataset.code || ''); });
                        if (checkbox.checked && textContent.trim() !== '') {
                            const color = swatch.dataset.color;
                            rawString += `<FG${color}FF>${textContent}`;
                            htmlString += `<span style="color: #${color}">${inputDiv.innerHTML}</span>`;
                        }
                    });
                } else { // random mode
                    const getRandomColor = () => presetColorValues[Math.floor(Math.random() * presetColorValues.length)];
                    randomTextInput.childNodes.forEach(node => {
                        if (node.nodeType === 3) { // Text node
                            for (const char of node.textContent) {
                                const color = getRandomColor();
                                rawString += `<FG${color}FF>${char}`;
                                htmlString += `<span style="color: #${color}">${char.replace(/</g, '&lt;').replace(/>/g, '&gt;')}</span>`;
                            }
                        } else if (node.nodeType === 1 && node.dataset.code) { // Emoji span
                            rawString += node.dataset.code;
                            htmlString += node.outerHTML;
                        }
                    });
                }

                outputText.innerHTML = htmlString;
                if (rawString) { navigator.clipboard.writeText(rawString).then(() => showNotification('å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼')).catch(err => { showNotification('å¤åˆ¶å¤±è´¥...', true); console.error('Clipboard error:', err); }); }
                else { showNotification('æ²¡æœ‰å†…å®¹å¯ç”Ÿæˆ', true); }
            };

            const insertEmoji = (code) => {
                if (!activeInput) return;
                activeInput.focus();
                const sel = window.getSelection();
                if (sel.rangeCount > 0) {
                    const range = selectionRange || sel.getRangeAt(0);
                    range.deleteContents();
                    const emojiNode = document.createElement('span');
                    emojiNode.className = 'emoji-code-inline';
                    emojiNode.setAttribute('contenteditable', 'false');
                    emojiNode.dataset.code = code;
                    emojiNode.textContent = code;
                    range.insertNode(emojiNode);
                    range.setStartAfter(emojiNode);
                    range.collapse(true);
                    sel.removeAllRanges();
                    sel.addRange(range);
                }
            };

            const initColorPicker = () => { for (const [name, hex] of Object.entries(presetColors)) { const div = document.createElement('div'); div.className = 'preset-color'; div.innerHTML = `<div class="preset-color-box" style="background-color: #${hex};" data-hex="${hex}"></div><span>${name}</span>`; colorGrid.appendChild(div); } };
            const initEmojiPicker = () => { Object.keys(emojis).forEach((category, index) => { const tab = document.createElement('div'); tab.className = 'emoji-tab'; tab.dataset.category = category; tab.textContent = category; emojiTabs.appendChild(tab); const panel = document.createElement('div'); panel.className = 'emoji-panel'; panel.id = `panel-${category}`; emojis[category].forEach(emoji => { const item = document.createElement('div'); item.className = 'emoji-item'; item.dataset.code = emoji.code; item.innerHTML = `${emoji.name}<span class="emoji-code">${emoji.code}</span>`; panel.appendChild(item); }); emojiPanels.appendChild(panel); if (index === 0) { tab.classList.add('active'); panel.classList.add('active'); } }); };

            // --- Event Listeners ---
            document.querySelector('.mode-tabs').addEventListener('click', (e) => {
                if (e.target.classList.contains('mode-tab') && !e.target.classList.contains('active')) {
                    document.querySelectorAll('.mode-tab, .mode-panel').forEach(el => el.classList.remove('active'));
                    currentMode = e.target.dataset.mode;
                    e.target.classList.add('active');
                    document.getElementById(`${currentMode}-mode-panel`).classList.add('active');
                    activeInput = currentMode === 'custom' ? segmentList.querySelector('.text-input') : randomTextInput;
                }
            });

            document.body.addEventListener('focusin', (e) => {
                if (e.target.classList.contains('text-input')) {
                    const row = e.target.closest('.segment-row');
                    if (row) {
                        document.querySelectorAll('.segment-row.active-row').forEach(r => r.classList.remove('active-row'));
                        row.classList.add('active-row');
                    }
                    activeInput = e.target;
                }
            });

            document.body.addEventListener('focusout', (e) => {
                if (e.target.classList.contains('text-input')) {
                    const sel = window.getSelection();
                    if (sel.rangeCount > 0) selectionRange = sel.getRangeAt(0);
                    const row = e.target.closest('.segment-row');
                    if (row) row.classList.remove('active-row');
                }
            });

            document.body.addEventListener('keydown', (e) => { if (e.key === 'Enter' && !e.shiftKey && e.target.classList.contains('text-input')) { e.preventDefault(); generateAndCopy(); } });

            segmentList.addEventListener('click', (e) => { if (e.target.classList.contains('add-btn')) createSegmentRow(); if (e.target.classList.contains('remove-btn')) { e.target.closest('.segment-row').remove(); updateRemoveButtons(); } if (e.target.classList.contains('color-swatch')) { activeColorSwatch = e.target; colorModal.style.display = 'block'; } });
            generateBtn.addEventListener('click', generateAndCopy);
            emojiBtn.addEventListener('click', () => { if (!activeInput) { (currentMode === 'custom' ? segmentList.querySelector('.text-input') : randomTextInput).focus(); } emojiModal.style.display = 'block'; });

            colorModalClose.addEventListener('click', () => colorModal.style.display = 'none');
            const applyColor = (hex) => { if (activeColorSwatch) { activeColorSwatch.style.backgroundColor = `#${hex}`; activeColorSwatch.dataset.color = hex; const inputDiv = activeColorSwatch.closest('.segment-row').querySelector('.text-input'); if (inputDiv) inputDiv.style.color = `#${hex}`; } };
            colorGrid.addEventListener('click', (e) => { const box = e.target.closest('.preset-color-box'); if (box) { applyColor(box.dataset.hex); colorModal.style.display = 'none'; } });
            customColorPicker.addEventListener('input', () => { const hex = customColorPicker.value.substring(1); customColorCode.textContent = `#${hex}`; applyColor(hex); });

            emojiModalClose.addEventListener('click', () => emojiModal.style.display = 'none');
            emojiTabs.addEventListener('click', (e) => { if (e.target.classList.contains('emoji-tab')) { const category = e.target.dataset.category; document.querySelectorAll('.emoji-tab, .emoji-panel').forEach(el => el.classList.remove('active')); e.target.classList.add('active'); document.getElementById(`panel-${category}`).classList.add('active'); } });
            emojiPanels.addEventListener('click', (e) => { const item = e.target.closest('.emoji-item'); if (item) { insertEmoji(item.dataset.code); emojiModal.style.display = 'none'; } });

            window.addEventListener('click', (e) => { if (e.target == colorModal) colorModal.style.display = 'none'; if (e.target == emojiModal) emojiModal.style.display = 'none'; });

            // --- Initialization ---
            createSegmentRow(true); initColorPicker(); initEmojiPicker();
            activeInput = segmentList.querySelector('.text-input'); // Set initial active input
        });
    </script>
</body>

</html>